{
  "typeIds": ["apx", "arc", "arg", "axm", "prx", "prh", "pxc", "pxg", "pxm", "cxx"],
  "domaineIds": ["m", "h", "s", "g", "c"],
  "statutIds": ["dmi", "dmc", "val", "mdi", "ech"],
  "policeIds": [true, false]
}

query Titres($typeIds: [TypeId!], $domaineIds: [DomaineId], $statutIds: [StatutId!], $policeIds: [Boolean!]) {
  titres(typeId: $typeIds, domaineId: $domaineIds, statutId: $statutIds, police: $policeIds) {
    id
    nom
    police
    type {
      id
      nom
    }
    domaine {
      id
      nom
    }
    statut {
      id
      nom
    }
    phases {
      geojsonPoints {
        type
        features {
          type
          geometry {
            type
            coordinates
          }
        }
      }
      geojsonMultiPolygon {
        type
        geometry {
          type
          coordinates
        }
      }
    }
    substancesPrincipales {
      ...sub
    }
    substancesConnexes {
      ...sub
    }
  }
}

fragment sub on Substance {
  id
  nom
  domaine
  type
  usage
  symbole
  alias
  gerep
  description
  legal {
    id
    nom
    description
    lien
  }
}
