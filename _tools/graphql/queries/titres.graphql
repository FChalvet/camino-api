{
  "typeIds": ["apx", "arc", "arg", "axm", "prx", "prh", "pxc", "pxg", "pxm", "cxx"],
  "domaineIds": ["m", "h", "s", "g", "c"],
  "statutIds": ["dmi", "dmc", "val", "mdi", "ech"]
}

query Titres($typeIds: [TypeId!], $domaineIds: [DomaineId], $statutIds: [StatutId!]) {
  titres(typeIds: $typeIds, domaineIds: $domaineIds, statutIds: $statutIds) {
    id
    nom
    type {
      id
      nom
    }
    domaine {
      id
      nom
    }
    statut {
      id
      nom
    }
    demarches {
      id
      type {
        id
        nom
      }
      statut {
        id
        nom
      }
      etapes {
        id
        statut {
          id
          nom
        }
        emprise {
          id
          nom
        }
        geojsonPoints {
          type
          features {
            type
            geometry {
              type
              coordinates
            }
          }
        }
        geojsonMultiPolygon {
          type
          geometry {
            type
            coordinates
          }
        }
        substances {
          ...sub
        }
      }
    }
  }
}

fragment sub on TitreSubstance {
  id
  nom
  connexe
  ordre
  domaine {
    id
    nom
  }
  type
  usage
  symbole
  alias
  gerep
  description
  legal {
    id
    nom
    description
    lien
  }
}
